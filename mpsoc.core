CAPI=2:
name: core:mpsoc:v1.0.0
description: MPSoC RISC-V

filesets:
  mpsoc_cfg:
    files:
      - ips/ethernet_axi/rtl/inc/eth_pkg.sv
      - rtl/mpsoc_defines.sv
      - ips/bus_arch_sv_pkg/amba_axi_pkg.sv
      - ips/bus_arch_sv_pkg/amba_ahb_pkg.sv
    file_type: systemVerilogSource

  soc_comp:
    files:
      - ips/soc_components/axi_crossbar_wrapper.sv
      - ips/soc_components/axi_interconnect_wrapper.sv
      - ips/soc_components/axi_mem_wrapper.sv
      - ips/soc_components/axi_rom_wrapper.sv
      - ips/soc_components/axi_rst_ctrl.sv
      - ips/soc_components/axi_spi_master.sv
      - ips/soc_components/axi_timer.sv
      - ips/soc_components/axi_uart_wrapper.sv
      - ips/soc_components/axil_to_axi.sv
      - ips/soc_components/cdc_2ff_sync.sv
      - ips/soc_components/async_gp_fifo.sv
      - ips/soc_components/sync_gp_fifo.sv
      - ips/soc_components/axi_irq_ctrl.sv
    file_type: systemVerilogSource

  mpsoc_rtl:
    files:
      - rtl/mpsoc_fpga.sv
      - rtl/tile_0.sv
      - rtl/tile_1.sv
      - rtl/tile_2.sv
      - rtl/tile_3.sv
      - rtl/tile_4.sv
      - rtl/tile_5.sv
      - rtl/tile_6.sv
      - rtl/tile_7.sv
      - rtl/tile_8.sv
      - rtl/nox_wrapper.sv
    file_type: systemVerilogSource

  dma_axi:
    files:
      - ips/axi_dma/rtl/inc/dma_pkg.svh: {is_include_file: true}
      - ips/axi_dma/rggen-verilog-rtl/rggen_rtl_macros.vh: {is_include_file: true}
      - ips/axi_dma/rggen-verilog-rtl/rggen_bit_field.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_adapter_common.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_address_decoder.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_apb_adapter.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_apb_bridge.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_axi4lite_adapter.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_axi4lite_bridge.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_axi4lite_skid_buffer.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_bit_field.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_bit_field_w01trg.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_default_register.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_external_register.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_indirect_register.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_mux.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_or_reducer.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_register_common.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_rtl_macros.vh
      - ips/axi_dma/rggen-verilog-rtl/rggen_wishbone_adapter.v
      - ips/axi_dma/rggen-verilog-rtl/rggen_wishbone_bridge.v
      - ips/axi_dma/rtl/inc/dma_utils_pkg.sv
      - ips/axi_dma/rtl/dma_axi_if.sv
      - ips/axi_dma/rtl/dma_axi_wrapper.sv
      - ips/axi_dma/rtl/dma_fifo.sv
      - ips/axi_dma/rtl/dma_fsm.sv
      - ips/axi_dma/rtl/dma_func_wrapper.sv
      - ips/axi_dma/rtl/dma_streamer.sv
      - ips/axi_dma/csr_out/csr_dma.v
    file_type: systemVerilogSource

  ravenoc:
    files:
      - ips/ravenoc/src/include/ravenoc_defines.svh: {is_include_file: true}
      - ips/ravenoc/src/include/ravenoc_axi_fnc.svh: {is_include_file: true}
      - ips/ravenoc/src/include/ravenoc_structs.svh: {is_include_file: true}
      - ips/ravenoc/src/include/ravenoc_pkg.sv
      - ips/ravenoc/src/ni/axi_csr.sv
      - ips/ravenoc/src/ni/axi_slave_if.sv
      - ips/ravenoc/src/ni/router_wrapper.sv
      - ips/ravenoc/src/ni/cdc_pkt.sv
      - ips/ravenoc/src/ni/pkt_proc.sv
      - ips/ravenoc/src/ravenoc.sv
      - ips/ravenoc/src/router/fifo.sv
      - ips/ravenoc/src/router/output_module.sv
      - ips/ravenoc/src/router/router_if.sv
      - ips/ravenoc/src/router/router_ravenoc.sv
      - ips/ravenoc/src/router/rr_arbiter.sv
      - ips/ravenoc/src/router/vc_buffer.sv
      - ips/ravenoc/src/router/input_router.sv
      - ips/ravenoc/src/router/input_module.sv
      - ips/ravenoc/src/router/input_datapath.sv
    file_type: systemVerilogSource

  verilog_ethernet:
    files:
      - ips/ethernet_axi/verilog-ethernet/lib/axis/rtl/arbiter.v
      - ips/ethernet_axi/verilog-ethernet/lib/axis/rtl/axis_async_fifo.v
      - ips/ethernet_axi/verilog-ethernet/lib/axis/rtl/axis_async_fifo_adapter.v
      - ips/ethernet_axi/verilog-ethernet/lib/axis/rtl/axis_fifo.v
      - ips/ethernet_axi/verilog-ethernet/lib/axis/rtl/priority_encoder.v
      - ips/ethernet_axi/verilog-ethernet/lib/axis/rtl/sync_reset.v
      - ips/ethernet_axi/verilog-ethernet/rtl/arp.v
      - ips/ethernet_axi/verilog-ethernet/rtl/arp_cache.v
      - ips/ethernet_axi/verilog-ethernet/rtl/arp_eth_rx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/arp_eth_tx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/axis_gmii_rx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/axis_gmii_tx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_arb_mux.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_axis_rx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_axis_tx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_rgmii.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_gmii.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_rgmii_fifo.v
      - ips/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_gmii_fifo.v
      - ips/ethernet_axi/verilog-ethernet/rtl/iddr.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ip.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ip_arb_mux.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ip_complete.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ip_eth_rx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ip_eth_tx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/lfsr.v
      - ips/ethernet_axi/verilog-ethernet/rtl/oddr.v
      - ips/ethernet_axi/verilog-ethernet/rtl/rgmii_phy_if.v
      - ips/ethernet_axi/verilog-ethernet/rtl/gmii_phy_if.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ssio_ddr_in.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ssio_sdr_in.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ssio_sdr_out.v
      - ips/ethernet_axi/verilog-ethernet/rtl/udp.v
      - ips/ethernet_axi/verilog-ethernet/rtl/udp_checksum_gen.v
      - ips/ethernet_axi/verilog-ethernet/rtl/udp_complete.v
      - ips/ethernet_axi/verilog-ethernet/rtl/udp_ip_rx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/udp_ip_tx.v
      - ips/ethernet_axi/verilog-ethernet/rtl/ssio_ddr_out.v
    file_type: verilogSource

  ethernet_axi:
    files:
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_adapter_common.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_address_decoder.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_apb_adapter.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_apb_bridge.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_axi4lite_adapter.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_axi4lite_bridge.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_axi4lite_skid_buffer.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_bit_field.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_bit_field_w01trg.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_default_register.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_external_register.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_indirect_register.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_mux.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_register_common.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_rtl_macros.vh
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_wishbone_adapter.v
      - ips/ethernet_axi/rggen-verilog-rtl/rggen_wishbone_bridge.v
      - ips/ethernet_axi/csr_out/eth_csr.v
      - ips/ethernet_axi/rtl/clk_mgmt_eth.sv
      - ips/ethernet_axi/rtl/pkt_fifo.sv
      - ips/ethernet_axi/rtl/ethernet_wrapper.sv
      - ips/ethernet_axi/rtl/eth_fifo.sv
      - ips/ethernet_axi/rtl/bytewrite_tdp_ram_rf.v
    file_type: verilogSource
      #- ips/ethernet_axi/rtl/inc/eth_pkg.svh : {is_include_file: true}

  boot_rom:
    files:
      - sw/bootloader/output/boot_rom.sv
    file_type: systemVerilogSource

  nox:
    files:
      - ips/nox/rtl/inc/core_bus_pkg.svh: {is_include_file: true}
      - ips/nox/rtl/inc/nox_pkg.svh:      {is_include_file: true}
      - ips/nox/rtl/inc/riscv_pkg.svh:    {is_include_file: true}
      - ips/nox/rtl/inc/nox_utils_pkg.sv
      - ips/nox/rtl/fetch.sv
      - ips/nox/rtl/fifo_nox.sv
      - ips/nox/rtl/nox.sv
      - ips/nox/rtl/wb.sv
      - ips/nox/rtl/reset_sync.sv
      - ips/nox/rtl/csr.sv
      - ips/nox/rtl/execute.sv
      - ips/nox/rtl/cb_to_axi.sv
      - ips/nox/rtl/cb_to_ahb.sv
      - ips/nox/rtl/register_file.sv
      - ips/nox/rtl/lsu.sv
      - ips/nox/rtl/skid_buffer.sv
      - ips/nox/rtl/decode.sv
    file_type: systemVerilogSource

  uart_axi:
    files:
      - ips/soc_components/wbuart32/rtl/txuart.v
      - ips/soc_components/wbuart32/rtl/rxuartlite.v
      - ips/soc_components/wbuart32/rtl/rxuart.v
      - ips/soc_components/wbuart32/rtl/skidbuffer.v
      - ips/soc_components/wbuart32/rtl/ufifo.v
      - ips/soc_components/wbuart32/rtl/txuartlite.v
      - ips/soc_components/wbuart32/rtl/axiluart.v
      - ips/soc_components/wbuart32/rtl/wbuart.v
    file_type: systemVerilogSource

  verilog_axi_aignacio:
    files:
      - ips/verilog-axi-aignacio/rtl/axi_dma_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_dma_wr.v
      - ips/verilog-axi-aignacio/rtl/axi_ram_wr_if.v
      - ips/verilog-axi-aignacio/rtl/axi_axil_adapter.v
      - ips/verilog-axi-aignacio/rtl/axi_adapter_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_dma.v
      - ips/verilog-axi-aignacio/rtl/axi_register_wr.v
      - ips/verilog-axi-aignacio/rtl/priority_encoder.v
      - ips/verilog-axi-aignacio/rtl/axi_dp_ram.v
      - ips/verilog-axi-aignacio/rtl/axi_adapter_wr.v
      - ips/verilog-axi-aignacio/rtl/axi_ram.v
      - ips/verilog-axi-aignacio/rtl/axi_ram_wo_reset.v
      - ips/verilog-axi-aignacio/rtl/axi_register_rd.v
      - ips/verilog-axi-aignacio/rtl/axil_register_wr.v
      - ips/verilog-axi-aignacio/rtl/axil_interconnect.v
      - ips/verilog-axi-aignacio/rtl/axi_crossbar_rd.v
      - ips/verilog-axi-aignacio/rtl/axil_adapter_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_crossbar_wr.v
      - ips/verilog-axi-aignacio/rtl/axil_register_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_crossbar.v
      - ips/verilog-axi-aignacio/rtl/axi_cdma.v
      - ips/verilog-axi-aignacio/rtl/axil_adapter_wr.v
      - ips/verilog-axi-aignacio/rtl/axi_cdma_desc_mux.v
      - ips/verilog-axi-aignacio/rtl/axil_dp_ram.v
      - ips/verilog-axi-aignacio/rtl/axi_fifo.v
      - ips/verilog-axi-aignacio/rtl/axil_register.v
      - ips/verilog-axi-aignacio/rtl/axi_adapter.v
      - ips/verilog-axi-aignacio/rtl/axil_adapter.v
      - ips/verilog-axi-aignacio/rtl/axi_fifo_wr.v
      - ips/verilog-axi-aignacio/rtl/axi_ram_rd_if.v
      - ips/verilog-axi-aignacio/rtl/axi_fifo_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_crossbar_addr.v
      - ips/verilog-axi-aignacio/rtl/axi_ram_wr_rd_if.v
      - ips/verilog-axi-aignacio/rtl/axil_cdc_wr.v
      - ips/verilog-axi-aignacio/rtl/axil_ram.v
      - ips/verilog-axi-aignacio/rtl/axil_cdc.v
      - ips/verilog-axi-aignacio/rtl/axil_cdc_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_axil_adapter_rd.v
      - ips/verilog-axi-aignacio/rtl/axi_interconnect.v
      - ips/verilog-axi-aignacio/rtl/axi_register.v
      - ips/verilog-axi-aignacio/rtl/axi_dma_desc_mux.v
      - ips/verilog-axi-aignacio/rtl/axi_axil_adapter_wr.v
    file_type: verilogSource

  files_tcl:
    files:
      - xlnx/tcl/call_viv_hooks.tcl: { file_type: tclSource }
      - xlnx/tcl/vivado_hook_synth_design_pre.tcl: { file_type: user, copyto: vivado_hook_synth_design_pre.tcl }
      - xlnx/tcl/vivado_hook_write_bitstream_pre.tcl: { file_type: user, copyto: vivado_hook_write_bitstream_pre.tcl }
      - xlnx/tcl/vivado_hook_opt_design_post.tcl: { file_type: user, copyto: vivado_hook_opt_design_post.tcl }

  arty7_constraints:
    files:
      - xlnx/xdc/arty_7.xdc: {file_type: xdc}

  nv_constraints:
    files:
      - xlnx/xdc/nexys_video.xdc: {file_type: xdc}

  k7_constraints:
    files:
      - xlnx/xdc/kintex7_qmtech.xdc: {file_type: xdc}

parameters:
  DISPLAY_TEST:
    datatype: bool
    default : false
    paramtype: vlogdefine
  NEXYS_VIDEO:
    datatype: bool
    default : true
    paramtype: vlogdefine
  QMTECH_KINTEX_7:
    datatype: bool
    default : true
    paramtype: vlogdefine
  ARTY_A7:
    datatype: bool
    default : true
    paramtype: vlogdefine
  DE10_LITE:
    datatype: bool
    default : true
    paramtype: vlogdefine

targets:
  default: &default
    filesets: [mpsoc_cfg,ravenoc,soc_comp,nox,dma_axi,mpsoc_rtl,boot_rom,uart_axi,verilog_axi_aignacio]
    toplevel: mpsoc

  nv_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - NEXYS_VIDEO
    description : Nexys Video board synthesis
    filesets_append:
      - nv_constraints
      - files_tcl
      - verilog_ethernet
      - ethernet_axi
    tools:
      vivado:
        part : xc7a200t-sbg484-1
    toplevel: mpsoc
